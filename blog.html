<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no"/>
		<meta charset="UTF-8">
		<title>博客</title>
		<link rel="stylesheet" type="text/css" href="./bootstrap/css/bootstrap.min.css"/>
		<link rel="stylesheet" href="./css/common.css" />
		<link rel="stylesheet" href="./css/blog.css" />
	</head>
	<body>
		<header>
			<!--navbar navbar-default-->
			<nav class="navbar navbar-inverse " role="navigation">
				<div class="container">
					<div class="navbar-header"></div>
					<ul class="nav nav-pills" role="tablist">
						<li role="presentation" ><a href="./index.html"><span class="glyphicon glyphicon-home"></span>Home</a></li>
						<li role="presentation"><a href="./blog.html"><span class="glyphicon glyphicon-list-alt"></span>My blog</a></li>
						<li role="presentation"><a href="./contact.html"><span class="glyphicon glyphicon-leaf
glyphicon "></span>Contact</a></li>
						<li role="presentation"><a href="./myinfo.html"><span class="glyphicon glyphicon-heart"></span>About Me</a></li>
						<li role="presentation"><a href="./messages.html"><span class="glyphicon glyphicon-comment"></span>Live Messages</a></li>
					</ul>
				</div>
			</nav>
		</header>
		<div class="container" id="classify">
			<!--分类框-->
			<div class="classify">
				<ul>
					<li><a href="##">HTML</a></li>
					<li><a href="##">CSS</a></li>
					<li><a href="##">JavaScript</a></li>
					<li><a href="##">Nodejs</a></li>
				</ul>
			</div>
		</div>
		<section class="container" id="blogwrapper">
			<!--数据模板 -->
		</section>

		<div class="pagewrapper container" >
			<!--分页-->
			<ul class="pagination" id="pagewrapper"></ul>
		</div>
		<!--底部-->
		<script src="footer.js" type="text/javascript" charset="utf-8"></script>
		<script src="./js/lib/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="./js/lib/html5shiv.min.js"></script>
		<script src="./bootstrap/js/bootstrap.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="./js/app/all.js"></script>	
		<script>
            $(function(){
                showblog(1);
            })
			function showblog(now){
                $.get('/blogcon/'+now,function(data,status){
                    var dataarray=[],
                        pagecount=data[data.length-1];
//					取得数据部分
					data.splice(data.length-1,1);
//                    编写数据模板
					var html="";
					for(var j=0;j<data.length;j++){
					    html+='<article class="panel panel-default"><div class="panel-heading">';
					    html+='<h3 class="panel-title"><a href="/blogview/'+data[j]._id+'">'+data[j].title+'</a></h3></div>'
					    html+='<div class="panel-body">'+data[j].blogcon+'</div><div class="panel-footer">';
					    html+='<span class="pull-left">作者：'+data[j].author+'&emsp;关键字:'+data[j].keyword+'</span><span class="article_time pull-right">'+data[j].date+'</span>'
						html+='</div></article>'
					}
					$("#blogwrapper").html(html);


//                   分页功能
					if(now!=1){ var page='<li><a href="javascript:showblog('+(now-1)+')">上一页</a></li>';}
					else{var page="";}
                    for(var i=1;i<=pagecount;i++){
					    if(i==now){page+='<li class="active"><a href="javascript:showblog('+i+')">'+i+'</a></li>';}
					    else{
                            page+='<li ><a href="javascript:showblog('+i+')">'+i+'</a></li>';
                        }
                    };
					if(now!=pagecount){
                        page+='<li><a href="javascript:showblog('+(now*1+1)+')">下一页</a></li>'
                    };
					$("#pagewrapper").html(page);
                });
			}

		</script>
		
	</body>
</html>
